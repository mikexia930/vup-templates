#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# è¿è¡Œ ESLint å’Œ Prettier
pnpm lint-staged

# ç”Ÿæˆ apps åˆ—è¡¨
echo "ğŸ”„ æ­£åœ¨ç”Ÿæˆæœ€æ–°çš„ apps åˆ—è¡¨..."
node .husky/scripts/generate-apps-list.js

# å°†ç”Ÿæˆçš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº
git add .template.config.json

# changeset æ£€æŸ¥
if [ -n "$(git diff --cached --name-only)" ]; then
  if [ -z "$(find .changeset -name "*.md" -newer .git/COMMIT_EDITMSG 2>/dev/null)" ]; then
    echo "âš ï¸  æ£€æµ‹åˆ°ä»£ç å˜æ›´ï¼Œè¯·è€ƒè™‘æ˜¯å¦éœ€è¦åˆ›å»º changesetï¼š"
    echo "   pnpm changeset"
    echo ""
  fi
fi